<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>DiscordCert</title>
    <style>
      body {
        font-family: Arial;
        padding: 1em;
      }
      .main {
        max-width: min(1440px, 100vw);
        margin: auto;
        word-wrap: break-word;
      }
      .method {
        background-color: lime;
        text-transform: uppercase;
      }
    </style>
  </head>
  <body>
    <div class='main'>
      <h1>DiscordCert</h1>
      <p>
        DiscordCert Certificate Issuance Server
      </p>
      <p>Learn more on <a href='https://github.com/p2ppsr/discordcert-backend'>GitHub</a></p>
      <p>For a UI that can interact with DiscordCert, go <a href='https://discordcert.babbage.systems'>here</a>.</p>
      <h2>Server Parameters</h2>
      <p>This server's certifier public key is: <%= PUBKEY %></p>
      <p>This server will issue certificates with type: <%= CERTIFICATE_TYPE_ID %></p>
      <h2>Endpoint Documentation</h2>
        <% for (let i in routes) { %>
        <h3>
          <b class='method'><%= routes[i].type %></b> <%= HOSTING_DOMAIN %><%= ROUTING_PREFIX %><%= routes[i].path %>
        </h3>
        <p>
          <%= routes[i].summary %>
        </p>
        <% if (typeof routes[i].parameters === 'object') { %>
          <h4>Parameters</h4>
          <ul>
            <% Object.entries(routes[i].parameters).forEach(([k, v]) => { %>
              <li><b><%= k %></b>: <%= v %></li>
            <% }) %>
          </ul>
        <% } %>
        <% if (typeof routes[i].exampleResponse === 'object') { %>
          <h4>Example Response</h4>
          <pre><%= JSON.stringify(routes[i].exampleResponse, null, 2) %></pre>
        <% } %>
      <% } %>
      <p>Built with love in 2023 by the Babbage Team</p>
    </div>
  </body>
</html>
